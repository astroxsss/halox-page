<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Halox</title>
  <meta name="description" content="Halox - æ¯›ç»ç’ƒé…ç½®é€‰æ‹©é¡µ" />

  <style>
    :root{
      --glass-bg: rgba(255,255,255,.58);
      --glass-bg-2: rgba(255,255,255,.40);
      --border: rgba(255,255,255,.70);
      --text: #0f172a;
      --muted: rgba(15,23,42,.72);
      --shadow: 0 20px 60px rgba(15,23,42,.12);
      --shadow-soft: 0 10px 30px rgba(15,23,42,.10);
      --ring: rgba(59,130,246,.22);
      --accent: #3b82f6;
      --accent2: #06b6d4;
      --good: #22c55e;
      --bad: #ef4444;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      overflow-x:hidden;
      background: radial-gradient(1200px 700px at 20% 10%, rgba(99,102,241,.22), transparent 55%),
                  radial-gradient(1000px 600px at 80% 20%, rgba(34,197,94,.16), transparent 55%),
                  radial-gradient(1200px 700px at 60% 90%, rgba(14,165,233,.16), transparent 55%),
                  linear-gradient(135deg, #f8fbff 0%, #eef6ff 45%, #f7fbff 100%);
    }

    /* èƒŒæ™¯ç™½é›¾ */
    .fog{
      position:fixed;
      inset:-30vh -30vw;
      pointer-events:none;
      filter: blur(20px);
      opacity:.55;
      background:
        radial-gradient(220px 140px at 20% 30%, rgba(255,255,255,.90), transparent 70%),
        radial-gradient(260px 160px at 65% 25%, rgba(255,255,255,.75), transparent 70%),
        radial-gradient(240px 150px at 45% 65%, rgba(255,255,255,.80), transparent 70%),
        radial-gradient(260px 160px at 80% 70%, rgba(255,255,255,.70), transparent 70%);
      animation: drift 14s ease-in-out infinite alternate;
    }
    @keyframes drift{
      from{ transform: translate3d(-2vw,-2vh,0) scale(1.02); }
      to{ transform: translate3d(2vw,2vh,0) scale(1.06); }
    }

    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 42px 18px;
      position:relative;
      z-index:1;
    }

    .card{
      width:min(1080px, 100%);
      display:grid;
      grid-template-columns: 380px 1fr;
      gap: 18px;
      padding: 18px;
      border-radius: 28px;
      background: linear-gradient(180deg, rgba(255,255,255,.62), rgba(255,255,255,.40));
      border: 1px solid rgba(255,255,255,.55);
      box-shadow: var(--shadow);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      position:relative;
      overflow:hidden;
    }
    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(520px 220px at 20% 10%, rgba(59,130,246,.18), transparent 55%),
                  radial-gradient(520px 260px at 80% 20%, rgba(34,197,94,.12), transparent 55%),
                  radial-gradient(520px 260px at 60% 90%, rgba(14,165,233,.14), transparent 55%);
      filter: blur(8px);
      opacity:.95;
      pointer-events:none;
    }
    .card > *{ position:relative; z-index:1; }

    @media (max-width: 920px){
      .card{ grid-template-columns: 1fr; }
    }

    .panel{
      border-radius: 22px;
      padding: 22px;
      background: var(--glass-bg);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
    }

    .profile{
      animation: floaty 7s ease-in-out infinite;
    }
    @keyframes floaty{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-6px); }
    }

    .avatar{
      width: 92px;
      height: 92px;
      border-radius: 24px;
      background: linear-gradient(135deg, rgba(59,130,246,.18), rgba(14,165,233,.14), rgba(34,197,94,.10));
      border: 1px solid rgba(255,255,255,.85);
      display:grid;
      place-items:center;
      box-shadow: 0 12px 30px rgba(59,130,246,.10);
      position:relative;
      overflow:hidden;
    }
    .avatar::after{
      content:"";
      position:absolute;
      inset:-40%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.95), transparent 55%);
      transform: rotate(18deg);
      opacity:.7;
    }
    .avatar span{
      font-weight: 900;
      font-size: 28px;
      letter-spacing: .5px;
      color: rgba(15,23,42,.85);
      position:relative;
      z-index:1;
    }

    .name{
      margin: 16px 0 6px;
      font-size: 28px;
      letter-spacing: .4px;
    }

    .notice{
      margin: 0 0 14px;
      color: rgba(15,23,42,.80);
      line-height: 1.75;
      font-size: 14px;
      padding: 12px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.52);
      border: 1px solid rgba(255,255,255,.78);
      box-shadow: 0 10px 22px rgba(15,23,42,.06);
    }
    .notice b{ font-weight: 800; }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      margin-top: 14px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
      padding: 11px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.7);
      background: rgba(255,255,255,.55);
      color: rgba(15,23,42,.86);
      text-decoration:none;
      font-weight: 700;
      font-size: 14px;
      box-shadow: 0 12px 28px rgba(15,23,42,.08);
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
      user-select:none;
      cursor:pointer;
    }
    .btn:hover{
      transform: translateY(-2px);
      box-shadow: 0 18px 40px rgba(15,23,42,.10);
      background: rgba(255,255,255,.68);
      border-color: rgba(255,255,255,.92);
    }
    .btn.primary{
      background: linear-gradient(135deg, rgba(59,130,246,.18), rgba(6,182,212,.12));
      border-color: rgba(59,130,246,.18);
      box-shadow: 0 18px 42px rgba(59,130,246,.12);
    }
    .btn.danger{
      background: rgba(239,68,68,.10);
      border-color: rgba(239,68,68,.18);
    }

    footer{
      margin-top: 14px;
      font-size: 12px;
      color: rgba(15,23,42,.55);
    }

    /* å³ä¾§å†…å®¹åŒº */
    .h2{
      display:flex;
      align-items:center;
      gap:10px;
      margin: 0 0 10px;
      font-size: 16px;
      letter-spacing: .3px;
    }
    .dot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.95), rgba(59,130,246,.70));
      box-shadow: 0 0 0 6px var(--ring);
    }

    .topbar{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 12px;
    }

    .search{
      flex: 1 1 260px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    input[type="search"]{
      width:100%;
      padding: 11px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.78);
      background: rgba(255,255,255,.55);
      outline: none;
      font-size: 14px;
      box-shadow: 0 10px 22px rgba(15,23,42,.06);
    }
    .meta{
      font-size: 13px;
      color: rgba(15,23,42,.70);
      flex: 0 0 auto;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.78);
      background: rgba(255,255,255,.48);
      box-shadow: 0 10px 22px rgba(15,23,42,.06);
    }

    .tableWrap{
      margin-top: 10px;
      border-radius: 18px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.70);
      background: rgba(255,255,255,.40);
      box-shadow: 0 12px 26px rgba(15,23,42,.06);
    }

    table{
      width:100%;
      border-collapse: collapse;
      font-size: 14px;
    }
    thead th{
      text-align:left;
      padding: 12px 12px;
      background: rgba(255,255,255,.60);
      border-bottom: 1px solid rgba(15,23,42,.10);
      color: rgba(15,23,42,.78);
    }
    tbody td{
      padding: 10px 12px;
      border-bottom: 1px dashed rgba(15,23,42,.10);
      vertical-align: top;
    }
    tbody tr:hover{
      background: rgba(255,255,255,.38);
    }
    .cat{
      font-weight: 800;
      color: rgba(15,23,42,.82);
      width: 140px;
      white-space: nowrap;
    }

    .items{
      display:flex;
      flex-wrap:wrap;
      gap: 10px 12px;
      align-items:center;
    }
    .item{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(255,255,255,.78);
      box-shadow: 0 8px 18px rgba(15,23,42,.05);
      user-select:none;
      cursor:pointer;
    }
    .item input{
      width: 16px;
      height: 16px;
      accent-color: var(--accent);
      cursor:pointer;
    }
    .item span{
      color: rgba(15,23,42,.80);
      font-size: 13px;
    }

    .qrBox{
      margin-top: 16px;
      display:flex;
      gap: 12px;
      align-items:flex-start;
      flex-wrap:wrap;
    }
    .qrBox img{
      width: 220px;
      max-width: 100%;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.85);
      background: rgba(255,255,255,.55);
      box-shadow: 0 12px 26px rgba(15,23,42,.10);
    }
    .qrText{
      flex: 1 1 220px;
      color: rgba(15,23,42,.78);
      line-height: 1.8;
      font-size: 14px;
      padding: 12px 12px;
      border-radius: 18px;
      background: rgba(255,255,255,.52);
      border: 1px solid rgba(255,255,255,.78);
      box-shadow: 0 10px 22px rgba(15,23,42,.06);
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(15,23,42,.88);
      color: #fff;
      padding: 10px 14px;
      border-radius: 999px;
      font-size: 13px;
      opacity: 0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
      z-index: 50;
    }
    .toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(-4px);
    }

    @media (prefers-reduced-motion: reduce){
      .fog, .profile{ animation: none; }
      .btn{ transition:none; }
    }
  </style>
</head>

<body>
  <div class="fog"></div>
  <div class="toast" id="toast">å·²å®Œæˆ</div>

  <main class="wrap">
    <section class="card" aria-label="Halox é¡µé¢">
      <!-- å·¦ä¾§ï¼šä¸ªäººä¿¡æ¯ -->
      <aside class="panel profile">
        <div class="avatar" aria-label="å¤´åƒ">
          <span>HX</span>
        </div>

        <h1 class="name">Halox</h1>

        <div class="notice">
          <b>!!</b> ä¸‹è¡¨ä¸­çš„éœ€æ±‚ä»»é€‰ä¸€èˆ¬è´¹ç”¨æ˜¯50ï¼Œå…¶ä»–ç‰¹æ®Šéœ€æ±‚å¦ç®—ï¼Œä¸€èˆ¬è€—æ—¶ä¸€å°æ—¶ã€‚é»˜è®¤ä¸æä¾›æŠ€æœ¯æ”¯æŒï¼ŒæŠ€æœ¯æ”¯æŒé¢å¤–ä»˜è´¹
        </div>

        <div class="actions">
          <a class="btn primary" href="#contact">ğŸ“© è”ç³»æˆ‘</a>
          <button class="btn" id="btnDownload">â¬‡ï¸ ä¸‹è½½é…ç½® JSON</button>
          <button class="btn" id="btnCopy">ğŸ“‹ å¤åˆ¶é…ç½®</button>
          <button class="btn danger" id="btnClear">ğŸ§¹ æ¸…ç©ºé€‰æ‹©</button>
        </div>

        <footer>Â© <span id="year"></span> Â· Cloudflare Pages â˜ï¸</footer>
      </aside>

      <!-- å³ä¾§ï¼šé€‰æ‹©è¡¨æ ¼ + è”ç³»æ–¹å¼ -->
      <div class="panel">
        <div class="topbar">
          <div class="search">
            <input id="q" type="search" placeholder="æœç´¢åŠŸèƒ½åç§°ï¼ˆä¾‹å¦‚ï¼šOpenClash / Docker / DDNSï¼‰â€¦" />
          </div>
          <div class="meta">
            å·²é€‰ï¼š<b id="count">0</b> é¡¹
          </div>
        </div>

        <h2 class="h2"><span class="dot"></span>éœ€æ±‚é€‰æ‹©è¡¨ï¼ˆå‹¾é€‰åå¯å¯¼å‡ºé…ç½®æ–‡ä»¶ï¼‰</h2>

        <div class="tableWrap" aria-label="åŠŸèƒ½é€‰æ‹©è¡¨æ ¼">
          <table>
            <thead>
              <tr>
                <th style="width:160px;">åˆ†ç±»</th>
                <th>åŠŸèƒ½ï¼ˆç‚¹å‡»/å‹¾é€‰ï¼‰</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>

        <div style="height:16px;"></div>

        <h2 class="h2" id="contact"><span class="dot"></span>è”ç³»æˆ‘ï¼ˆæ‰«ç ï¼‰</h2>
        <div class="qrBox">
          <!-- âœ… ä½ æŠŠä½ å‘çš„äºŒç»´ç å›¾ä¿å­˜åˆ°ï¼šassets/wechat-qr.png -->
          <img src="assets/wechat-qr.png" alt="å¾®ä¿¡äºŒç»´ç " />
          <div class="qrText">
            æ‰«ç æ·»åŠ å¾®ä¿¡å³å¯ã€‚<br/>
            å¦‚æœå›¾ç‰‡ä¸æ˜¾ç¤ºï¼šè¯·ç¡®è®¤ä»“åº“é‡Œå­˜åœ¨ <b>assets/wechat-qr.png</b> ä¸”è·¯å¾„/æ–‡ä»¶åå®Œå…¨ä¸€è‡´ã€‚<br/>
            ä¹Ÿå¯ä»¥æŠŠäºŒç»´ç æ¢æˆåˆ«çš„å¹³å°äºŒç»´ç ï¼ˆåŒæ ·æ›¿æ¢å›¾ç‰‡å³å¯ï¼‰ã€‚
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // å¹´ä»½
    document.getElementById("year").textContent = new Date().getFullYear();

    // ä½ çš„åŠŸèƒ½æ¸…å•ï¼šæŒ‰åˆ†ç±»
    const DATA = [
      { category: "ç½‘ç»œå‘å¯¼", items: ["iStore", "çŠ¶æ€"] },
      { category: "ç³»ç»Ÿ", items: [
        "å®æ—¶ç›‘æ§","WireGuard çŠ¶æ€","é‡Šæ”¾å†…å­˜","TTYD ç»ˆç«¯","é«˜çº§è®¾ç½®","å®šæ—¶é‡å¯","æ–‡ä»¶ä¼ è¾“",
        "Argonä¸»é¢˜è®¾ç½®","Designä¸»é¢˜è®¾ç½®","KuCatä¸»é¢˜è®¾ç½®","ç£ç›˜ç®¡ç†","åˆ†åŒºæ‰©å®¹","å…³æœº","Webç®¡ç†",
        "ACME è¯ä¹¦","è‡ªå®šä¹‰å‘½ä»¤","Docker"
      ]},
      { category: "Docker", items: ["Docker(Dockerman)","Docker CE å®¹å™¨","ç®¡æ§"] },
      { category: "æœåŠ¡", items: [
        "é›†å®¢ACæ§åˆ¶å™¨","ShadowSocksR Plus+","PassWall","PassWall2","OpenClash","Hello World",
        "MosDNS","SmartDNS","AdGuard Home","iKoolProxy æ»¤å¹¿å‘Š","ç½‘ç«™åŸŸåé»‘ç™½åå•é…ç½®",
        "å¹¿å‘Šå±è”½å¤§å¸ˆ Plus+","DNS è¿‡æ»¤å™¨","å¾®ä¿¡æ¨é€","å…¨èƒ½æ¨é€",
        "åŠ¨æ€ DNS(æ”¯æŒé˜¿é‡Œè…¾è®¯)","é˜¿é‡ŒDDNS","DDNS-GO","è…¾è®¯äº‘DDNS","DDNSTO è¿œç¨‹æ§åˆ¶",
        "é›·ç¥åŠ é€Ÿå™¨","å¥‡æ¸¸è”æœºå®","UUæ¸¸æˆåŠ é€Ÿå™¨","UPnP","ç½‘ç»œå”¤é†’","ä¸Šç½‘æ—¶é—´æ§åˆ¶","è§£é”ç½‘æ˜“äº‘ç°è‰²æ­Œæ›²",
        "IPTV å¸®æ‰‹","ç»„æ’­ä»£ç†","ç»„æ’­è½¬æ¢","udpxy","Frps","Frp å†…ç½‘ç©¿é€","Chatgpt Web",
        "è’²å…¬è‹±æ™ºèƒ½ç»„ç½‘","èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€","é˜¿é‡Œäº‘ç›˜ WebDAV","é˜¿é‡Œäº‘ç›˜ FUSE",
        "MentoHUST","æ˜“æœ‰äº‘æ–‡ä»¶ç®¡ç†å™¨","OpenList","Lucky","QoS Nftables ç‰ˆ","LXC Containers",
        "WatchCat","uHTTPd","VPN ç»•è¿‡","KMS æœåŠ¡å™¨","OpenVPN(å®¢æˆ·ç«¯)","Nps å†…ç½‘ç©¿é€","Nps å®¢æˆ·ç«¯",
        "AirPlay 2 éŸ³é¢‘æ¥æ”¶å™¨","è¿…é›·å¿«é¸Ÿ","MWAN3 åˆ†æµåŠ©æ‰‹","ClamAV","Polipo","Dnsforwarder",
        "PS3 NET æœåŠ¡å™¨","Tinyproxy","V2ray æœåŠ¡å™¨","BearDropper"
      ]},
      { category: "ç½‘ç»œå­˜å‚¨", items: [
        "ç»Ÿä¸€æ–‡ä»¶å…±äº«","å¯é“äº‘","å¾®åŠ›åŒæ­¥","Alist æ–‡ä»¶åˆ—è¡¨","CloudDrive2","NFS ç®¡ç†","USB æ‰“å°æœåŠ¡å™¨",
        "æ‰“å°æœåŠ¡å™¨(æ¨¡å—)","ç¡¬ç›˜ä¼‘çœ ","ç½‘ç»œå…±äº«(SMB)","Webdav","æŒ‚è½½ SMB ç½‘ç»œå…±äº«",
        "Aria2 é…ç½®","qBittorrent","Transmission","FTP æœåŠ¡å™¨","PCHiFi æ•°å­—è½¬ç›˜é¥æ§",
        "miniDLNA","aMule","BaiduPCS Web"
      ]},
      { category: "VPN", items: ["ZeroTier","EasyTier","PPTP VPN æœåŠ¡å™¨","IPSec VPN æœåŠ¡å™¨","OpenVPN æœåŠ¡å™¨","SoftEther VPN æœåŠ¡å™¨","N2N VPN"] },
      { category: "ç½‘ç»œ", items: [
        "IP/MACç»‘å®š","ç®€å•MESH","SQM QoS","IPé™é€Ÿ","å®šæ—¶é™é€Ÿ","æœåŠ¡è´¨é‡(QoS)","åº”ç”¨è¿‡æ»¤",
        "ç½‘é€Ÿæµ‹è¯•","æµé‡ç»Ÿè®¡","å¤šçº¿å¤šæ‹¨","è´Ÿè½½å‡è¡¡","Socat","Turbo ACC ç½‘ç»œåŠ é€Ÿ","AHCP æœåŠ¡å™¨",
        "Macvlan","å¸¦å®½ç›‘æ§","ç½‘ç»œå¸¦å®½ç›‘è§†å™¨","å®æ—¶æµé‡ç›‘æµ‹"
      ]}
    ];

    // çŠ¶æ€
    const selected = new Set();

    const tbody = document.getElementById("tbody");
    const q = document.getElementById("q");
    const countEl = document.getElementById("count");

    function escapeHtml(s){
      return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
    }

    function toast(msg){
      const t = document.getElementById("toast");
      t.textContent = msg;
      t.classList.add("show");
      setTimeout(() => t.classList.remove("show"), 1300);
    }

    function updateCount(){
      countEl.textContent = selected.size.toString();
    }

    function render(){
      const keyword = (q.value || "").trim().toLowerCase();
      tbody.innerHTML = "";

      DATA.forEach(group => {
        const filtered = group.items.filter(name => name.toLowerCase().includes(keyword));
        if(keyword && filtered.length === 0) return;

        const tr = document.createElement("tr");

        const tdCat = document.createElement("td");
        tdCat.className = "cat";
        tdCat.textContent = group.category;

        const tdItems = document.createElement("td");
        const wrap = document.createElement("div");
        wrap.className = "items";

        (keyword ? filtered : group.items).forEach(name => {
          const id = `${group.category}__${name}`;

          const label = document.createElement("label");
          label.className = "item";
          label.setAttribute("for", id);

          const input = document.createElement("input");
          input.type = "checkbox";
          input.id = id;
          input.checked = selected.has(id);

          input.addEventListener("change", () => {
            if(input.checked) selected.add(id);
            else selected.delete(id);
            updateCount();
          });

          const span = document.createElement("span");
          span.innerHTML = escapeHtml(name);

          label.appendChild(input);
          label.appendChild(span);
          wrap.appendChild(label);
        });

        tdItems.appendChild(wrap);
        tr.appendChild(tdCat);
        tr.appendChild(tdItems);
        tbody.appendChild(tr);
      });

      updateCount();
    }

    function buildConfig(){
      // ç”Ÿæˆç»“æ„åŒ– JSONï¼šæŒ‰åˆ†ç±»è¾“å‡ºå·²é€‰é¡¹
      const out = {
        name: "Halox",
        pricing_note: "!! ä¸‹è¡¨ä¸­çš„éœ€æ±‚ä»»é€‰ä¸€èˆ¬è´¹ç”¨æ˜¯50ï¼Œå…¶ä»–ç‰¹æ®Šéœ€æ±‚å¦ç®—ï¼Œä¸€èˆ¬è€—æ—¶ä¸€å°æ—¶ã€‚é»˜è®¤ä¸æä¾›æŠ€æœ¯æ”¯æŒï¼ŒæŠ€æœ¯æ”¯æŒé¢å¤–ä»˜è´¹",
        selected_at: new Date().toISOString(),
        selections: {}
      };

      selected.forEach(id => {
        const [cat, name] = id.split("__");
        if(!out.selections[cat]) out.selections[cat] = [];
        out.selections[cat].push(name);
      });

      // æŒ‰å­—æ¯/ä¸­æ–‡æ’åºä¸€ä¸‹ï¼ˆå¯é€‰ï¼‰
      Object.keys(out.selections).forEach(cat => {
        out.selections[cat].sort((a,b) => a.localeCompare(b, "zh-Hant"));
      });

      return out;
    }

    function downloadJson(){
      const cfg = buildConfig();
      const blob = new Blob([JSON.stringify(cfg, null, 2)], {type:"application/json;charset=utf-8"});
      const a = document.createElement("a");
      const stamp = new Date().toISOString().replace(/[:.]/g, "-");
      a.href = URL.createObjectURL(blob);
      a.download = `halox-config-${stamp}.json`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      toast("å·²ä¸‹è½½ JSON âœ…");
    }

    async function copyJson(){
      const cfg = buildConfig();
      const text = JSON.stringify(cfg, null, 2);
      try{
        await navigator.clipboard.writeText(text);
        toast("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ âœ…");
      }catch(e){
        // å…¼å®¹ï¼šå¦‚æœå‰ªè´´æ¿æƒé™å¤±è´¥ï¼Œå°±å¼¹çª—æç¤º
        window.prompt("å¤åˆ¶å¤±è´¥ï¼Œå¯æ‰‹åŠ¨å¤åˆ¶ä¸‹é¢å†…å®¹ï¼š", text);
      }
    }

    function clearAll(){
      selected.clear();
      render();
      toast("å·²æ¸…ç©ºé€‰æ‹© ğŸ§¹");
    }

    q.addEventListener("input", render);
    document.getElementById("btnDownload").addEventListener("click", downloadJson);
    document.getElementById("btnCopy").addEventListener("click", copyJson);
    document.getElementById("btnClear").addEventListener("click", clearAll);

    // åˆæ¬¡æ¸²æŸ“
    render();
  </script>
</body>
</html>